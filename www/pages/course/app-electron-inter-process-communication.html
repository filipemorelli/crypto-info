<div class="page" data-name="electron-inter-process-communication">
    <div class="navbar">
        <div class="navbar-inner sliding">
            <div class="left">
                <a href="#" class="link back">
                    <i class="icon icon-back"></i>
                    <span class="ios-only">Voltar</span>
                </a>
            </div>
            <div class="title">Inter process communication (ipc)</div>
        </div>
    </div>
    <div class="page-content">
        <div class="block">

            <h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Electron - Inter Process Communication</font></font></h1>






            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O electronon nos fornece 2 módulos IPC (Inter Process Communication) chamados </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipcMain</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipcRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>
            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font><font style="vertical-align: inherit;">módulo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipcMain</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é usado para se comunicar de forma assíncrona do processo principal para processos de renderização. </font><font style="vertical-align: inherit;">Quando usado no processo principal, o módulo lida com mensagens assíncronas e síncronas enviadas a partir de um processo de renderização (página web). </font><font style="vertical-align: inherit;">As mensagens enviadas de um renderizador serão emitidas para este módulo.</font></font></p>
            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font><font style="vertical-align: inherit;">módulo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipcRenderer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é usado para se comunicar assincronamente de um processo de renderização para o processo principal. </font><font style="vertical-align: inherit;">Ele fornece alguns métodos para que você possa enviar mensagens síncronas e assíncronas do processo de renderização (página da web) para o processo principal. </font><font style="vertical-align: inherit;">Você também pode receber respostas do processo principal.</font></font></p>
            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos criar um processo principal e um processo de renderização que nos enviarão mensagens usando os módulos acima.</font></font></p>
            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie um novo arquivo chamado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main_process.js</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com os seguintes conteúdos:</font></font></p>
            <pre class="prettyprint notranslate prettyprinted" style=""><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln">app</span><span class="pun">,</span><span class="pln"> </span><span class="typ">BrowserWindow</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'electron'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> url </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'url'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'path'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln">ipcMain</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'electron'</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">let</span><span class="pln"> win

</span><span class="kwd">function</span><span class="pln"> createWindow</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   win </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BrowserWindow</span><span class="pun">({</span><span class="pln">width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">800</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">:</span><span class="pln"> </span><span class="lit">600</span><span class="pun">})</span><span class="pln">
   win</span><span class="pun">.</span><span class="pln">loadURL</span><span class="pun">(</span><span class="pln">url</span><span class="pun">.</span><span class="pln">format </span><span class="pun">({</span><span class="pln">
      pathname</span><span class="pun">:</span><span class="pln"> path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">__dirname</span><span class="pun">,</span><span class="pln"> </span><span class="str">'index.html'</span><span class="pun">),</span><span class="pln">
      protocol</span><span class="pun">:</span><span class="pln"> </span><span class="str">'file:'</span><span class="pun">,</span><span class="pln">
      slashes</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
   </span><span class="pun">}))</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// Event handler for asynchronous incoming messages</span><span class="pln">
ipcMain</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'asynchronous-message'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">event</span><span class="pun">,</span><span class="pln"> arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arg</span><span class="pun">)</span><span class="pln">

   </span><span class="com">// Event emitter for sending asynchronous messages</span><span class="pln">
   </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">sender</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="str">'asynchronous-reply'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'async pong'</span><span class="pun">)</span><span class="pln">
</span><span class="pun">})</span><span class="pln">

</span><span class="com">// Event handler for synchronous incoming messages</span><span class="pln">
ipcMain</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'synchronous-message'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">event</span><span class="pun">,</span><span class="pln"> arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arg</span><span class="pun">)</span><span class="pln">

   </span><span class="com">// Synchronous event emmision</span><span class="pln">
   </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">returnValue </span><span class="pun">=</span><span class="pln"> </span><span class="str">'sync pong'</span><span class="pln">
</span><span class="pun">})</span><span class="pln">

app</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'ready'</span><span class="pun">,</span><span class="pln"> createWindow</span><span class="pun">)</span></pre>
            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora, crie um novo </font><font style="vertical-align: inherit;">arquivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.html</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e adicione o seguinte código nele.</font></font></p>
            <pre class="prettyprint notranslate prettyprinted" style=""><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
   </span><span class="tag">&lt;head&gt;</span><span class="pln">
      </span><span class="tag">&lt;meta</span><span class="pln"> </span><span class="atn">charset</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"UTF-8"</span><span class="tag">&gt;</span><span class="pln">
      </span><span class="tag">&lt;title&gt;</span><span class="pln">Hello World!</span><span class="tag">&lt;/title&gt;</span><span class="pln">
   </span><span class="tag">&lt;/head&gt;</span><span class="pln">

   </span><span class="tag">&lt;body&gt;</span><span class="pln">
      </span><span class="tag">&lt;script&gt;</span><span class="pln">
         </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln">ipcRenderer</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> require</span><span class="pun">(</span><span class="str">'electron'</span><span class="pun">)</span><span class="pln">

         </span><span class="com">// Synchronous message emmiter and handler</span><span class="pln">
         console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">ipcRenderer</span><span class="pun">.</span><span class="pln">sendSync</span><span class="pun">(</span><span class="str">'synchronous-message'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'sync ping'</span><span class="pun">))</span><span class="pln">

         </span><span class="com">// Async message handler</span><span class="pln">
         ipcRenderer</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'asynchronous-reply'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">event</span><span class="pun">,</span><span class="pln"> arg</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">arg</span><span class="pun">)</span><span class="pln">
         </span><span class="pun">})</span><span class="pln">

         </span><span class="com">// Async message sender</span><span class="pln">
         ipcRenderer</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="str">'asynchronous-message'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'async ping'</span><span class="pun">)</span><span class="pln">
      </span><span class="tag">&lt;/script&gt;</span><span class="pln">
   </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></pre>
            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execute o aplicativo usando o seguinte comando -</font></font></p>
            <pre class="result notranslate">$ electron ./main_process.js
            </pre>
            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O comando acima gerará a saída a seguir -</font></font></p>
            <pre class="result notranslate">// On your app console
Sync Pong
Async Pong

// On your terminal where you ran the app
Sync Ping
Async Ping
            </pre>
            <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recomenda-se não realizar computação de tarefas pesadas / bloqueadoras no processo de renderização. </font><font style="vertical-align: inherit;">Use sempre o IPC para delegar essas tarefas ao processo principal. </font><font style="vertical-align: inherit;">Isso ajuda a manter o ritmo de sua aplicação.</font></font></p>





            <!-- PRINTING ENDS HERE -->


        </div>
    </div>
</div>