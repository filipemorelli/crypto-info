
<h1><font><font>Electron - Definição de atalhos</font></font></h1>






<p><font><font>Normalmente, memorizamos certos atalhos para todos os aplicativos que usamos no nosso PC diariamente. </font><font>Para que seus aplicativos se sintam intuitivos e facilmente acessíveis ao usuário, você deve permitir que o usuário use atalhos.</font></font></p>
<p><font><font>Usaremos o módulo globalShortcut para definir atalhos no nosso aplicativo. </font><font>Note-se que os </font></font><b><font><font>Aceleradores</font></font></b><font><font> são Strings que podem conter vários modificadores e códigos de teclas, combinados pelo caractere +. </font><font>Esses aceleradores são usados ​​para definir atalhos de teclado em toda a aplicação.</font></font></p>
<p><font><font>Deixe-nos considerar um exemplo e criar um atalho. </font><font>Para isso, seguiremos o exemplo das caixas de diálogo onde usamos a caixa de diálogo aberta para abrir arquivos. </font><font>Vamos registrar um </font><font>atalho </font></font><b><font><font>CommandOrControl + O</font></font></b><font><font> para abrir a caixa de diálogo.</font></font></p>
<p><font><font>Nosso </font><font>código </font></font><b><font><font>main.js</font></font></b><font><font> permanecerá o mesmo que antes. </font><font>Então crie um novo </font><font>arquivo </font></font><b><font><font>main.js</font></font></b><font><font> e digite o seguinte código nela -</font></font></p>
<pre class="prettyprint notranslate prettyprinted" style=""><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln">app</span><span class="pun">,</span><span class="pln"> </span><span class="typ">BrowserWindow</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'electron'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> url </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'url'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'path'</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln">ipcMain</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'electron'</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">let</span><span class="pln"> win

</span><span class="kwd">function</span><span class="pln"> createWindow</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   win </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BrowserWindow</span><span class="pun">({</span><span class="pln">width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">800</span><span class="pun">,</span><span class="pln"> height</span><span class="pun">:</span><span class="pln"> </span><span class="lit">600</span><span class="pun">})</span><span class="pln">
   win</span><span class="pun">.</span><span class="pln">loadURL</span><span class="pun">(</span><span class="pln">url</span><span class="pun">.</span><span class="pln">format </span><span class="pun">({</span><span class="pln">
      pathname</span><span class="pun">:</span><span class="pln"> path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">__dirname</span><span class="pun">,</span><span class="pln"> </span><span class="str">'index.html'</span><span class="pun">),</span><span class="pln">
      protocol</span><span class="pun">:</span><span class="pln"> </span><span class="str">'file:'</span><span class="pun">,</span><span class="pln">
      slashes</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
   </span><span class="pun">}))</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

ipcMain</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'openFile'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">event</span><span class="pun">,</span><span class="pln"> path</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln">dialog</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'electron'</span><span class="pun">)</span><span class="pln">
   </span><span class="kwd">const</span><span class="pln"> fs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'fs'</span><span class="pun">)</span><span class="pln">
   dialog</span><span class="pun">.</span><span class="pln">showOpenDialog</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">fileNames</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
         
      </span><span class="com">// fileNames is an array that contains all the selected</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">fileNames </span><span class="pun">===</span><span class="pln"> </span><span class="kwd">undefined</span><span class="pun">)</span><span class="pln">
         console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"No file selected"</span><span class="pun">)</span><span class="pln">
      </span><span class="kwd">else</span><span class="pln">
         readFile</span><span class="pun">(</span><span class="pln">fileNames</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span><span class="pln">
   </span><span class="pun">})</span><span class="pln">

   </span><span class="kwd">function</span><span class="pln"> readFile</span><span class="pun">(</span><span class="pln">filepath</span><span class="pun">){</span><span class="pln">
      fs</span><span class="pun">.</span><span class="pln">readFile</span><span class="pun">(</span><span class="pln">filepath</span><span class="pun">,</span><span class="pln"> </span><span class="str">'utf-8'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">err</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
         </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">err</span><span class="pun">){</span><span class="pln">
            alert</span><span class="pun">(</span><span class="str">"An error ocurred reading the file :"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> err</span><span class="pun">.</span><span class="pln">message</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln">
         </span><span class="pun">}</span><span class="pln">
         
         </span><span class="com">// handle the file content</span><span class="pln">
         </span><span class="kwd">event</span><span class="pun">.</span><span class="pln">sender</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="str">'fileData'</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln">
      </span><span class="pun">})</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
</span><span class="pun">})</span><span class="pln">

app</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'ready'</span><span class="pun">,</span><span class="pln"> createWindow</span><span class="pun">)</span></pre>
<p><font><font>Este código abrirá a caixa de diálogo aberta sempre que nosso processo principal receber uma mensagem 'openFile' de um processo de renderização. </font><font>Anteriormente, esta caixa de diálogo surgiu sempre que o aplicativo foi executado. </font><font>Vamos agora limitá-lo a abrir somente quando nodejss pressionamos </font></font><b><font><font>CommandOrControl + O</font></font></b><font><font> .</font></font></p>
<p><font><font>Agora, crie um novo </font><font>arquivo </font></font><b><font><font>index.html</font></font></b><font><font> com o seguinte conteúdo -</font></font></p>
<pre class="prettyprint notranslate prettyprinted" style=""><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
   </span><span class="tag">&lt;head&gt;</span><span class="pln">
      </span><span class="tag">&lt;meta</span><span class="pln"> </span><span class="atn">charset</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"UTF-8"</span><span class="tag">&gt;</span><span class="pln">
      </span><span class="tag">&lt;title&gt;</span><span class="pln">File read using system dialogs</span><span class="tag">&lt;/title&gt;</span><span class="pln">
   </span><span class="tag">&lt;/head&gt;</span><span class="pln">
   
   </span><span class="tag">&lt;body&gt;</span><span class="pln">
      </span><span class="tag">&lt;p&gt;</span><span class="pln">Press CTRL/CMD + O to open a file. </span><span class="tag">&lt;/p&gt;</span><span class="pln">
      </span><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">type</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="atv">"text/javascript"</span><span class="tag">&gt;</span><span class="pln">
         </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln">ipcRenderer</span><span class="pun">,</span><span class="pln"> remote</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> require</span><span class="pun">(</span><span class="str">'electron'</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln">globalShortcut</span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> remote
         globalShortcut</span><span class="pun">.</span><span class="kwd">register</span><span class="pun">(</span><span class="str">'CommandOrControl+O'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            ipcRenderer</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="str">'openFile'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
               console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"Event sent."</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">})</span><span class="pln">
            
            ipcRenderer</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="str">'fileData'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">event</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
               document</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span><span class="pln">
            </span><span class="pun">})</span><span class="pln">
         </span><span class="pun">})</span><span class="pln">
      </span><span class="tag">&lt;/script&gt;</span><span class="pln">
   </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></pre>
<p><font><font>Registramos um novo atalho e passamos uma chamada de retorno que será executada sempre que pressionarmos este atalho. </font><font>Podemos cancelar o registro de atalhos de uma vez e quando não os exigimos.</font></font></p>
<p><font><font>Agora, uma vez que o aplicativo seja aberto, obteremos a mensagem para abrir o arquivo usando o atalho que acabamos de definir.</font></font></p>
<img src="https://www.tutorialspoint.com/electron/images/opendialog.jpg" alt="Abrir diálogo">
<p><font><font>Esses atalhos podem ser customizados, permitindo ao usuário escolher seus próprios atalhos para ações definidas.</font></font></p>





<!-- PRINTING ENDS HERE -->